from django.contrib.auth import get_user_model
from django.contrib.auth.models import Group
from django.core.management.base import BaseCommand, CommandError
from django.db import connection
from core.apps.authapp import models as local_models

User = get_user_model()

class Command(BaseCommand):
    help = 'Closes the specified poll for voting'

    def handle(self, *args, **options):
        group = Group.objects.filter(id=2)
        if group.exists():
            groups_permissions = group[0].permissions.exists()
            if groups_permissions:
                self.stdout.write(self.style.ERROR('Permissions exist!'))
                return
            with connection.cursor() as cursor:
                cursor.execute("INSERT INTO `auth_group_permissions` VALUES (13,2,13),(14,2,14),(15,2,15),(16,2,16),(17,2,17),(18,2,18),(19,2,19),(20,2,20),(21,2,21),(22,2,22),(23,2,23),(24,2,24),(25,2,25),(26,2,26),(27,2,27),(28,2,28),(33,2,33),(34,2,34),(35,2,35),(36,2,36),(37,2,37),(38,2,38),(39,2,39),(40,2,40),(41,2,41),(42,2,42),(43,2,43),(44,2,44),(45,2,45),(46,2,46),(47,2,47),(48,2,48),(49,2,49),(50,2,50),(51,2,51),(52,2,52),(53,2,53),(54,2,54),(55,2,55),(56,2,56),(57,2,57),(58,2,58),(59,2,59),(60,2,60),(61,2,61),(62,2,62),(63,2,63),(64,2,64),(65,2,65),(66,2,66),(67,2,67),(68,2,68),(69,2,69),(70,2,70),(71,2,71),(72,2,72),(73,2,73),(74,2,74),(75,2,75),(76,2,76),(77,2,77),(78,2,78),(79,2,79),(80,2,80),(81,2,81),(82,2,82),(83,2,83),(84,2,84),(85,2,85),(86,2,86),(87,2,87),(88,2,88),(89,2,89),(90,2,90),(91,2,91),(92,2,92),(93,2,93),(94,2,94),(95,2,95),(96,2,96),(97,2,97),(98,2,98),(99,2,99),(100,2,100),(117,3,17),(118,3,18),(119,3,19),(120,3,20),(121,3,21),(122,3,22),(123,3,23),(124,3,24),(125,3,25),(126,3,26),(127,3,27),(128,3,28),(137,3,37),(138,3,38),(139,3,39),(140,3,40),(141,3,41),(142,3,42),(143,3,43),(144,3,44),(145,3,45),(146,3,46),(147,3,47),(148,3,48),(149,3,49),(150,3,50),(151,3,51),(152,3,52),(153,3,53),(154,3,54),(155,3,55),(156,3,56),(157,3,57),(158,3,58),(159,3,59),(160,3,60),(161,3,61),(162,3,62),(163,3,63),(164,3,64),(165,3,65),(166,3,66),(167,3,67),(168,3,68),(169,3,69),(170,3,70),(171,3,71),(172,3,72),(173,3,73),(174,3,74),(175,3,75),(176,3,76),(177,3,77),(178,3,78),(179,3,79),(180,3,80),(181,3,81),(182,3,82),(183,3,83),(184,3,84),(185,3,85),(186,3,86),(187,3,87),(188,3,88),(189,3,89),(190,3,90),(191,3,91),(192,3,92),(193,3,93),(194,3,94),(195,3,95),(196,3,96),(197,3,97),(198,3,98),(199,3,99),(200,3,100),(221,4,21),(222,4,22),(223,4,23),(224,4,24),(225,4,25),(226,4,26),(227,4,27),(228,4,28),(240,4,40),(244,4,44),(248,4,48),(249,4,49),(250,4,50),(251,4,51),(252,4,52),(253,4,53),(254,4,54),(255,4,55),(256,4,56),(260,4,60),(264,4,64),(268,4,68),(269,4,69),(270,4,70),(271,4,71),(272,4,72),(273,4,73),(274,4,74),(275,4,75),(276,4,76),(277,4,77),(278,4,78),(279,4,79),(280,4,80),(284,4,84),(288,4,88),(300,4,100),(301,6,22),(302,6,24),(303,6,26),(304,6,28),(305,6,36),(306,6,40),(307,6,44),(308,6,48),(309,6,52),(310,6,57),(311,6,58),(312,6,59),(313,6,60),(314,6,64),(315,6,65),(316,6,66),(317,6,67),(318,6,68),(319,6,72),(320,6,76),(321,6,80),(322,6,84),(323,6,85),(324,6,86),(325,6,87),(326,6,88),(327,6,92),(328,6,100);")
            self.stdout.write(self.style.SUCCESS('Permissions created!'))
        else:
            self.stdout.write(self.style.ERROR('Groups does not exist!'))